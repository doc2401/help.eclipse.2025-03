<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (21) -->
<title>ISaveParticipant (Eclipse Platform API Specification)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: package: org.eclipse.core.resources, interface: ISaveParticipant">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<div class="about-language"><span style='font-size:small'><b>Eclipse Platform</b><br>2025-03 (4.35)</span></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/ISaveParticipant.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Summary:</p>
<ul>
<li>Nested</li>
<li>Field</li>
<li>Constr</li>
<li><a href="#method-summary">Method</a></li>
</ul>
</li>
<li>
<p>Detail:</p>
<ul>
<li>Field</li>
<li>Constr</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><a href="../../../../search.html">SEARCH</a>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.eclipse.core.resources</a></div>
<h1 title="Interface ISaveParticipant" class="title">Interface ISaveParticipant</h1>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Superinterfaces:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/EventListener.html" title="class or interface in java.util" class="external-link">EventListener</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public interface </span><span class="element-name type-name-label">ISaveParticipant</span><span class="extends-implements">
extends <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/EventListener.html" title="class or interface in java.util" class="external-link">EventListener</a></span></div>
<div class="block">A participant in the saving of the workspace.
 <p>
 Plug-ins implement this interface and register to participate
 in workspace save operations.
 </p>
 <p>
 Clients may implement this interface.
 </p></div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="IWorkspace.html#save(boolean,org.eclipse.core.runtime.IProgressMonitor)"><code>IWorkspace.save(boolean, org.eclipse.core.runtime.IProgressMonitor)</code></a></li>
</ul>
</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab3" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab3', 3)" class="table-tab">Abstract Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#doneSaving(org.eclipse.core.resources.ISaveContext)" class="member-name-link">doneSaving</a><wbr>(<a href="ISaveContext.html" title="interface in org.eclipse.core.resources">ISaveContext</a>&nbsp;context)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Tells this participant that the workspace save operation is now
 complete and it is free to go about its normal business.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#prepareToSave(org.eclipse.core.resources.ISaveContext)" class="member-name-link">prepareToSave</a><wbr>(<a href="ISaveContext.html" title="interface in org.eclipse.core.resources">ISaveContext</a>&nbsp;context)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Tells this participant that the workspace is about to be
 saved.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#rollback(org.eclipse.core.resources.ISaveContext)" class="member-name-link">rollback</a><wbr>(<a href="ISaveContext.html" title="interface in org.eclipse.core.resources">ISaveContext</a>&nbsp;context)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Tells this participant to rollback its important state.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#saving(org.eclipse.core.resources.ISaveContext)" class="member-name-link">saving</a><wbr>(<a href="ISaveContext.html" title="interface in org.eclipse.core.resources">ISaveContext</a>&nbsp;context)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Tells this participant to save its important state because
 the workspace is being saved, as described in the supplied
 save context.</div>
</div>
</div>
</div>
</div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="doneSaving(org.eclipse.core.resources.ISaveContext)">
<h3>doneSaving</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">doneSaving</span><wbr><span class="parameters">(<a href="ISaveContext.html" title="interface in org.eclipse.core.resources">ISaveContext</a>&nbsp;context)</span></div>
<div class="block">Tells this participant that the workspace save operation is now
 complete and it is free to go about its normal business.
 Exceptions are not expected to be thrown at this point, so they
 should be handled internally.
 <p>
 Note: This method is called by the platform; it is not intended
 to be called directly by clients.
 </p></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>context</code> - the save context object</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="prepareToSave(org.eclipse.core.resources.ISaveContext)">
<h3>prepareToSave</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">prepareToSave</span><wbr><span class="parameters">(<a href="ISaveContext.html" title="interface in org.eclipse.core.resources">ISaveContext</a>&nbsp;context)</span>
            throws <span class="exceptions"><a href="../runtime/CoreException.html" title="class in org.eclipse.core.runtime">CoreException</a></span></div>
<div class="block">Tells this participant that the workspace is about to be
 saved. In preparation, the participant is expected to suspend
 its normal operation until further notice. <code>saving</code>
 will be next, followed by either <code>doneSaving</code>
 or <code>rollback</code> depending on whether the workspace
 save was successful.
 <p>
 Note: This method is called by the platform; it is not intended
 to be called directly by clients.
 </p></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>context</code> - the save context object</dd>
<dt>Throws:</dt>
<dd><code><a href="../runtime/CoreException.html" title="class in org.eclipse.core.runtime">CoreException</a></code> - if this method fails to snapshot
   the state of this workspace</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="rollback(org.eclipse.core.resources.ISaveContext)">
<h3>rollback</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">rollback</span><wbr><span class="parameters">(<a href="ISaveContext.html" title="interface in org.eclipse.core.resources">ISaveContext</a>&nbsp;context)</span></div>
<div class="block">Tells this participant to rollback its important state.
 The context's previous state number indicates what it was prior
 to the failed save.
 Exceptions are not expected to be thrown at this point, so they
 should be handled internally.
 <p>
 Note: This method is called by the platform; it is not intended
 to be called directly by clients.
 </p></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>context</code> - the save context object</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="ISaveContext.html#getPreviousSaveNumber()"><code>ISaveContext.getPreviousSaveNumber()</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="saving(org.eclipse.core.resources.ISaveContext)">
<h3>saving</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">saving</span><wbr><span class="parameters">(<a href="ISaveContext.html" title="interface in org.eclipse.core.resources">ISaveContext</a>&nbsp;context)</span>
     throws <span class="exceptions"><a href="../runtime/CoreException.html" title="class in org.eclipse.core.runtime">CoreException</a></span></div>
<div class="block">Tells this participant to save its important state because
 the workspace is being saved, as described in the supplied
 save context.
 <p>
 Note: This method is called by the platform; it is not intended
 to be called directly by clients.
 </p>
 <p>
 The basic contract for this method is the same for full saves,
 snapshots and project saves: the participant must absolutely guarantee that any
 important user data it has gathered will not be irrecoverably lost
 in the event of a crash. The only difference is in the space-time
 tradeoffs that the participant should make.</p>
 <ul>
 <li>Full saves: the participant is
 encouraged to save additional non-essential information that will aid
 it in retaining user state and configuration information and quickly getting
 back in sync with the state of the platform at a later point.
 </li>
 <li>Snapshots: the participant is discouraged from saving non-essential
 information that could be recomputed in the unlikely event of a crash.
 This lifecycle event will happen often and participant actions should take
 an absolute minimum of time.
 </li>
 <li>Project saves: the participant should only save project related data.
 It is discouraged from saving non-essential information that could be recomputed
 in the unlikely event of a crash.
 </li>
 </ul>
 For instance, the Java IDE gathers various user preferences and would want to
 make sure that the current settings are safe and sound after a
 <code>save</code> (if not saved immediately).
 The Java IDE would likely save computed image builder state on full saves,
 because this would allow the Java IDE to be restarted later and not
 have to recompile the world at that time. On the other hand, the Java
 IDE would not save the image builder state on a snapshot because
 that information is non-essential; in the unlikely event of a crash,
 the image should be rebuilt either from scratch or from the last saved
 state.
 <p>
 The following snippet shows how a plug-in participant would write
 its important state to a file whose name is based on the save
 number for this save operation.</p>
 <pre>
     Plugin plugin = ...; // known
     int saveNumber = context.getSaveNumber();
     String saveFileName = "save-" + Integer.toString(saveNumber);
     File f = plugin.getStateLocation().append(saveFileName).toFile();
     plugin.writeImportantState(f);
     context.map(IPath.fromOSString("save"), IPath.fromOSString(saveFileName));
     context.needSaveNumber();
     context.needDelta(); // optional
 </pre>
 <p>
 When the plug-in is reactivated in a subsequent workspace session,
 it needs to re-register to participate in workspace saves. When it
 does so, it is handed back key information about what state it had last
 saved. If it's interested, it can also ask for a resource delta
 describing all resource changes that have happened since then, if this
 information is still available.
 The following snippet shows what a participant plug-in would
 need to do if and when it is reactivated:
 </p>
 <pre>
     IWorkspace ws = ...; // known
     Plugin plugin = ...; // known
     ISaveParticipant saver = ...; // known
     ISavedState ss = ws.addSaveParticipant(plugin, saver);
     if (ss == null) {
         // activate for very first time
         plugin.buildState();
     } else {
         String saveFileName = ss.lookup(IPath.fromOSString("save"));
         File f = plugin.getStateLocation().append(saveFileName).toFile();
         plugin.readImportantState(f);
         IResourceChangeListener listener = new IResourceChangeListener() {
             public void resourceChanged(IResourceChangeEvent event) {
                 IResourceDelta delta = event.getDelta();
                 if (delta != null) {
                     // fast reactivation using delta
                     plugin.updateState(delta);
                 } else {
                     // slower reactivation without benefit of delta
                     plugin.rebuildState();
                 }
         };
         ss.processResourceChangeEvents(listener);
     }
 </pre></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>context</code> - the save context object</dd>
<dt>Throws:</dt>
<dd><code><a href="../runtime/CoreException.html" title="class in org.eclipse.core.runtime">CoreException</a></code> - if this method fails</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="ISaveContext.html#getSaveNumber()"><code>ISaveContext.getSaveNumber()</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small><br><span style='font-size:small;float:right'>Copyright (c) 2000, 2023 Eclipse Contributors and others. All rights reserved.</span><span style='font-size:small'><a href='../../../../../misc/api-usage-rules.html'>Guidelines for using Eclipse APIs.</a></span></small></p>
</footer>
</div>
</div>
</body>
</html>
